(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Info/volunteerInfo"],{"0458":function(n,t,e){"use strict";(function(n){e("d241");o(e("66fd"));var t=o(e("2731"));function o(n){return n&&n.__esModule?n:{default:n}}n(t.default)}).call(this,e("543d")["createPage"])},"0bdb":function(n,t,e){"use strict";e.d(t,"b",(function(){return i})),e.d(t,"c",(function(){return r})),e.d(t,"a",(function(){return o}));var o={uniRow:function(){return e.e("uni_modules/uni-row/components/uni-row/uni-row").then(e.bind(null,"8719"))},uniCol:function(){return e.e("uni_modules/uni-row/components/uni-col/uni-col").then(e.bind(null,"cc0e"))},uniForms:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(e.bind(null,"35fd"))},uniFormsItem:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item")]).then(e.bind(null,"41e4"))},uniEasyinput:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput")]).then(e.bind(null,"3c21"))},uniDataCheckbox:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uni-data-checkbox/components/uni-data-checkbox/uni-data-checkbox")]).then(e.bind(null,"eab5"))},uniFilePicker:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker")]).then(e.bind(null,"f500"))}},i=function(){var n=this,t=n.$createElement;n._self._c},r=[]},2731:function(n,t,e){"use strict";e.r(t);var o=e("0bdb"),i=e("9f1f");for(var r in i)"default"!==r&&function(n){e.d(t,n,(function(){return i[n]}))}(r);e("8360");var a,c=e("f0c5"),s=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);t["default"]=s.exports},8360:function(n,t,e){"use strict";var o=e("9388"),i=e.n(o);i.a},9388:function(n,t,e){},"9f1f":function(n,t,e){"use strict";e.r(t);var o=e("aec7"),i=e.n(o);for(var r in o)"default"!==r&&function(n){e.d(t,n,(function(){return o[n]}))}(r);t["default"]=i.a},aec7:function(n,t,e){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(e("60ba")),i=e("2f62");function r(n){return n&&n.__esModule?n:{default:n}}function a(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,o)}return e}function c(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?a(Object(e),!0).forEach((function(t){s(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):a(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function s(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var u,l=e("5b7e"),f={data:function(){return{info:{address:"",back_card:"",city:"",district:"",front_card:"",gender:0,latitude:"",longitude:"",name:"",place:"",profession:"",province:"",tel:"",transportation:""},Backimage:[],Frontimage:[],frontFlag:!1,backFlag:!1,value:0,range:[{value:0,text:"男"},{value:1,text:"女"}]}},created:function(){u=new l({key:"QV7BZ-6M76X-TFL4M-TGKDY-FFC76-VJF7O"}),this.info.tel=this.tel,this.info.name=this.name,this.info.gender=this.gender,this.value=this.gender},computed:c({},(0,i.mapState)(["token","uid","tel","pw","name","gender"])),methods:{onChange:function(n){this.info.gender=n.detail.value,console.log(this.info.gender)},selectBack:function(t){var e=this,o=t.tempFilePaths,i="Bearer ".concat(this.token);n.uploadFile({url:"https://fwwb2020-proxy-slk.tgucsdn.com/file/upload",header:{Authorization:i,"Content-Type":"multipart/form-data"},filePath:o[0],name:"photo",success:function(n){if(200==n.statusCode){e.backFlag=!0;var t=JSON.parse(n.data);console.log(t),e.info.back_card=t.data.url}console.log(e.info)},fail:function(n){console.log(n)}})},selectFront:function(t){var e=this,o=t.tempFilePaths,i="Bearer ".concat(this.token);n.uploadFile({url:"https://fwwb2020-proxy-slk.tgucsdn.com/file/upload",header:{Authorization:i,"Content-Type":"multipart/form-data"},filePath:o[0],name:"photo",success:function(n){if(200==n.statusCode){e.frontFlag=!0;var t=JSON.parse(n.data);console.log(t),e.info.front_card=t.data.url}console.log(e.info)},fail:function(n){console.log(n)}})},chooseLocation:function(){var t=this;n.chooseLocation({success:function(n){t.info.latitude=n.latitude,t.info.longitude=n.longitude,t.info.address=n.address,t.info.place=n.name,t.analysisLocation(n.latitude,n.longitude)}}),console.log(t.info)},analysisLocation:function(n,t){var e=this;u.reverseGeocoder({location:{latitude:n,longitude:t},success:function(n){e.info.province=n.result.address_component.province,e.info.city=n.result.address_component.city,e.info.district=n.result.address_component.district}}),console.log(this.info)},getcitys:function(){u.getCityList({success:function(n){console.log(n.result)}})},finisnInfo:function(){var t=this,e="Bearer ".concat(this.token);console.log(t.backFlag),console.log(t.frontFlag),this.info.name?this.info.profession?this.info.transportation?this.info.address?this.backFlag||this.frontFlag?n.request({url:"https://fwwb2020-proxy-slk.tgucsdn.com/volunteer/add",method:"POST",header:{"content-type":"application/json",Authorization:e},data:{address:t.info.address,back_card:t.info.back_card,city:t.info.city,district:t.info.district,front_card:t.info.front_card,gender:t.info.gender,latitude:t.info.latitude,longitude:t.info.longitude,name:t.info.name,place:t.info.place,province:t.info.province,profession:t.info.profession,tel:t.info.tel,transportation:t.info.transportation},success:function(t){console.log(t.data),200==t.data.status?(n.showToast({title:"申请成功",icon:"none",mask:!0,image:"../../static/img/success.png"}),o.default.commit("volunteer",t.data.data.volunteer),setTimeout((function(){n.switchTab({url:"../volunteer/registerVolunteer"})}),1e3)):n.showToast({title:"".concat(t.data.msg),icon:"none",mask:!0,image:"../../static/img/error.png"})},fail:function(t){n.showToast({title:"申请失败！",icon:"none",mask:!0,image:"../../static/img/error.png"})}}):n.showToast({mask:!0,image:"../../static/img/error.png",icon:"none",title:"请等待上传"}):n.showToast({mask:!0,image:"../../static/img/error.png",icon:"none",title:"请填写常驻位置"}):n.showToast({mask:!0,image:"../../static/img/error.png",icon:"none",title:"请填写交通工具"}):n.showToast({mask:!0,image:"../../static/img/error.png",icon:"none",title:"请填写职业"}):n.showToast({mask:!0,image:"../../static/img/error.png",icon:"none",title:"请填写名字"})}}};t.default=f}).call(this,e("543d")["default"])}},[["0458","common/runtime","common/vendor"]]]);