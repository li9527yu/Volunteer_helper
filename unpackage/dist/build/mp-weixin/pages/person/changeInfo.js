(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/person/changeInfo"],{"01c4":function(n,e,t){"use strict";t.r(e);var i=t("2a4a"),o=t("ca60");for(var a in o)"default"!==a&&function(n){t.d(e,n,(function(){return o[n]}))}(a);t("1c52");var r,u=t("f0c5"),c=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);e["default"]=c.exports},"1c52":function(n,e,t){"use strict";var i=t("64ac"),o=t.n(i);o.a},"2a4a":function(n,e,t){"use strict";t.d(e,"b",(function(){return o})),t.d(e,"c",(function(){return a})),t.d(e,"a",(function(){return i}));var i={uniRow:function(){return t.e("uni_modules/uni-row/components/uni-row/uni-row").then(t.bind(null,"8719"))},uniCol:function(){return t.e("uni_modules/uni-row/components/uni-col/uni-col").then(t.bind(null,"cc0e"))},uniForms:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(t.bind(null,"35fd"))},uniFormsItem:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item")]).then(t.bind(null,"41e4"))},uniEasyinput:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput")]).then(t.bind(null,"3c21"))},uniDataCheckbox:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-data-checkbox/components/uni-data-checkbox/uni-data-checkbox")]).then(t.bind(null,"eab5"))},uniDatetimePicker:function(){return t.e("uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker").then(t.bind(null,"a453"))},uniFilePicker:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker")]).then(t.bind(null,"f500"))}},o=function(){var n=this,e=n.$createElement;n._self._c},a=[]},"64ac":function(n,e,t){},ca60:function(n,e,t){"use strict";t.r(e);var i=t("e243"),o=t.n(i);for(var a in i)"default"!==a&&function(n){t.d(e,n,(function(){return i[n]}))}(a);e["default"]=o.a},d54b:function(n,e,t){"use strict";(function(n){t("d241");i(t("66fd"));var e=i(t("01c4"));function i(n){return n&&n.__esModule?n:{default:n}}n(e.default)}).call(this,t("543d")["createPage"])},e243:function(n,e,t){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(t("60ba")),o=t("2f62");function a(n){return n&&n.__esModule?n:{default:n}}function r(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,i)}return t}function u(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?r(Object(t),!0).forEach((function(e){c(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function c(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var s=t("5b7e"),l={data:function(){return{flag:!1,changeStatus:!0,info:{radio:0,name:"",phone:"",picture:"",uid:"",birthday:""},date:"",value:0,range:[{value:0,text:"男士"},{value:1,text:"女士"}],imageValue:[]}},computed:u(u({},(0,o.mapState)(["name","token","gender","picture","birthday","uid"])),{},{infoStatus:function(){return this.flag?"完成":"修改信息"}}),created:function(){new s({key:"QV7BZ-6M76X-TFL4M-TGKDY-FFC76-VJF7O"}),this.info.name=this.name,this.info.radio=this.gender,this.info.birthday=this.birthday,this.date=this.birthday,this.info.name=this.name,this.value=this.gender,this.info.uid=this.uid,this.info.picture=this.picture;var n={name:"userImage",extname:"png",url:this.picture};this.imageValue.splice(0,0,n)},methods:{dateChange:function(n){this.info.birthday="".concat(n)},select:function(e){var t=this,i=e.tempFilePaths,o="Bearer ".concat(this.token);n.uploadFile({url:"https://fwwb2020-proxy-slk.tgucsdn.com/file/upload",header:{Authorization:o,"Content-Type":"multipart/form-data"},filePath:i[0],name:"photo",success:function(n){var e=JSON.parse(n.data);console.log(e),202==e.status&&(t.info.picture=e.data.url),console.log(t.info)},fail:function(n){console.log(n)}})},onChange:function(n){console.log(n.detail),this.info.radio=n.detail.value},changeInfo:function(){var e=this,t="Bearer ".concat(this.token);if(console.log(this.info),this.flag){if(console.log(this.info),!this.info.name)return void n.showToast({mask:!0,image:"../../static/img/error.png",icon:"none",title:"请填写姓名"});if(!this.info.birthday)return void n.showToast({mask:!0,image:"../../static/img/error.png",icon:"none",title:"请填写出生日期"});if(0==this.imageValue.length)return void n.showToast({mask:!0,image:"../../static/img/error.png",icon:"none",title:"请上传照片"});n.request({url:"https://fwwb2020-proxy-slk.tgucsdn.com/user/changeUser",method:"POST",header:{"content-type":"application/json",Authorization:t},data:{gender:e.info.radio,name:e.info.name,picture:e.info.picture,uid:e.info.uid,birthday:e.info.birthday},success:function(t){if(console.log(t.data),200==t.data.status){n.showToast({title:"修改成功",icon:"none",mask:!0,image:"../../static/img/success.png"});var o=t.data.data;o.token=e.token,console.log(o),i.default.commit("login",t.data.data),setTimeout((function(){n.switchTab({url:"./person"})}),1e3)}else n.showToast({title:"".concat(t.data.msg),icon:"none",mask:!0,image:"../../static/img/error.png"})},fail:function(e){n.showToast({title:"修改失败！",icon:"none",mask:!0,image:"../../static/img/error.png"})}})}else this.flag=!0,this.changeStatus=!1}}};e.default=l}).call(this,t("543d")["default"])}},[["d54b","common/runtime","common/vendor"]]]);